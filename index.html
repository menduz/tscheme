<html>
  <head>
    <style type="text/css">
      img  { display:none }
    </style>
    <img src="canvas/blackcat.jpg" id="cat"/>
    <img src="canvas/chuni.jpg" id="human"/>
  </head>
  <body>
    <form>
<textarea id="input" style='width:100%; height:50%;'>
(define (right-split painter n) (if (eq? n 0) painter (let ((smaller (right-split painter (- n 1)))) (beside painter (below smaller smaller)))))
(define (up-split painter n) (if (eq? n 0) painter (let ((smaller (up-split painter (- n 1)))) (below painter (beside smaller smaller)))))
(define (corner-split painter n) (if (eq? n 0) painter (let ((up (up-split painter (- n 1))) (right (right-split painter (- n 1)))) (let ((top-left (beside up up)) (bottom-right (below right right)) (corner (corner-split painter (- n 1)))) (beside (below painter top-left) (below bottom-right corner))))))
(define (round painter n) (let ((corner (corner-split painter n))) (let ((half (below (flip-vert corner) corner))) (beside (rotate90 (rotate90 half)) half))))
(draw (round cat 3))
</textarea><br>
      <input type="button" onclick="run(document.getElementById('input').value)" value="evaluate" />
    </form>

    <div id="dv"></div>
    <canvas id="canvas" width="500" height="500" ></canvas>
    <script type="text/javascript" src="src/all.js"></script>
    <script type="text/javascript">
run = function(s) {
    var global = createGlobalEnvironment();
    addPictureFunction(global);
    var list = s.split('\n');
    var res = "";
    for (var i = 0; i < list.length && list[i] !== ''; ++i) {
        var parsed = parse(list[i]);
        var s = ast(parsed);
        res += s.toString();
        res += '\n';
        res += '>>> ';
        res += s.evaluate(global);
        res += '\n';
    }
    document.getElementById("dv").innerText=res;
}
    </script>
  </body>
</html>
